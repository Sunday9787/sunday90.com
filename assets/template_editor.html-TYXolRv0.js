import{_ as s,o as a,c as e,a as t,e as p,f as o}from"./app-8KgkyZWp.js";const c={};function l(i,n){return a(),e("div",null,[n[0]||(n[0]=t("p",null,"ç¼–è¾‘å™¨æ˜¯åˆ›ä½œè€…çš„å·¥å…·ç®±ï¼Œæ¯ä¸€ä¸ªåŠŸèƒ½é”®éƒ½è•´è—ç€æ— é™å¯èƒ½...",-1)),p(" more "),n[1]||(n[1]=o(`<h2 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h2><p>ç­‰äº†å¥½ä¹…ç»ˆäºç­‰åˆ°ä»Šå¤©ï¼Œæ¢¦äº†å¥½ä¹…ç»ˆäºæŠŠæ¢¦å®ç°...</p><h2 id="éœ€æ±‚åˆ†æ" tabindex="-1"><a class="header-anchor" href="#éœ€æ±‚åˆ†æ" aria-hidden="true">#</a> éœ€æ±‚åˆ†æ</h2><p>ç¼–è¾‘å™¨ï¼Œæ˜¯è£…è½½ç”»å¸ƒçš„å…¥å£ï¼Œéœ€è¦å®ç°ç”»å¸ƒçš„ç¼©æ”¾åŠŸèƒ½&amp;æ ¹æ®é¼ æ ‡ä½ç½®ç¼©æ”¾ï¼Œå’Œéœ€è¦æ‹–åŠ¨ç”»å¸ƒ</p><h2 id="è®¾è®¡" tabindex="-1"><a class="header-anchor" href="#è®¾è®¡" aria-hidden="true">#</a> è®¾è®¡</h2><p>ç¼©æ”¾</p><p>ç¼©æ”¾ä½¿ç”¨css çš„ scaleï¼Œä¸ºäº†é¿å…ç²¾åº¦é—®é¢˜ï¼Œé‡‡ç”¨10-100èŒƒå›´å†…æ•°å­—</p><p>æ ¹æ®ä½ç½®ç¼©æ”¾</p><p>å…ˆè®¡ç®—æœªç¼©æ”¾å‰é¼ æ ‡è·ç¦»ç”»å¸ƒleft&amp;topæ¯”ä¾‹</p><p>å†è®¡ç®—ç¼©æ”¾åé¼ æ ‡è·ç¦»ç”»å¸ƒleft&amp;top</p><p>å†å°†å·¦å³æ¯”ä¾‹ä»æ–°è®¡ç®—å³å¯</p><p><em>ps: è¿™ä¸ªåŠŸèƒ½æˆ‘æŸ¥äº†å¥½å¤šèµ„æ–™,ç»ˆäºææ˜ç™½äº†ğŸ¥²ï¼Œä¸ç†è§£çš„ä»”ç»†çœ‹ä»£ç éƒ¨åˆ†æ³¨é‡Š</em></p><h2 id="è§†å›¾" tabindex="-1"><a class="header-anchor" href="#è§†å›¾" aria-hidden="true">#</a> è§†å›¾</h2><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pug<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
main.template-editor
  section.template-canvas(ref=&quot;canvas&quot;)
    TemplateStage(
      :scale=&quot;scale.value&quot;
      :position=&quot;position&quot;
      :spaceDown=&quot;spaceDown&quot;
      :scale-manual=&quot;scale.manual&quot;
      @keydown.space.exact.native=&quot;spaceDownHandle&quot;
      @keyup.space.exact.native=&quot;spaceUpHandle&quot;
      ref=&quot;refComponent&quot;)
  app-scale(
    :scale.sync=&quot;scale.value&quot;
    :max-scale=&quot;scale.max&quot;
    :mini-scale=&quot;scale.mini&quot;
    :step=&quot;scale.step&quot;
    @change=&quot;scaleManual(true)&quot;)
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ç½®æ›´æ–°ä»¥åŠç¼©æ”¾é€šè¿‡ä¼ é€’<code>Props</code>ç”±å­ç»„ä»¶<code>TemplateStage</code>æ¸²æŸ“</p><p><strong>æœ‰ä¸€ä¸ªé‡è¦çš„ç‚¹</strong>ï¼Œ<code>TemplateStage</code>åœ¨ä½¿ç”¨æ»šè½®ç¼©æ”¾æ—¶éœ€è¦è®¾ç½®<code>transformOrigin</code>ä¸º<code>top left</code>ï¼Œåœ¨ä½¿ç”¨æ§åˆ¶æŒ‰é’®ç¼©æ”¾æ—¶ï¼Œå€¼éœ€è¦ä¸º<code>center</code>è¿™æ ·å¯ä»¥ä¿è¯æ‰‹åŠ¨ç¼©æ”¾çš„æ—¶å€™ç”»å¸ƒå§‹ç»ˆåœ¨ç¼–è¾‘å™¨ä¸­é—´</p><h2 id="å®ç°" tabindex="-1"><a class="header-anchor" href="#å®ç°" aria-hidden="true">#</a> å®ç°</h2><h3 id="ç¼©æ”¾" tabindex="-1"><a class="header-anchor" href="#ç¼©æ”¾" aria-hidden="true">#</a> ç¼©æ”¾</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span>Template<span class="token punctuation">.</span>Store<span class="token punctuation">}</span></span>
 */</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span>storeSymbol<span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> refComponent <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useToHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token doc-comment comment">/** ç¼©æ”¾æ¯”ä¾‹ */</span>
<span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">step</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token literal-property property">mini</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token literal-property property">manual</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token doc-comment comment">/**
  * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>WheelEvent<span class="token punctuation">}</span></span> <span class="token parameter">e</span>
  */</span>
<span class="token keyword">const</span> <span class="token function-variable function">mousewheel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span><span class="token function">scaleManual</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>deltaY <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scale<span class="token punctuation">.</span>value <span class="token operator">&gt;</span> scale<span class="token punctuation">.</span>mini<span class="token punctuation">)</span> scale<span class="token punctuation">.</span>value <span class="token operator">-=</span> scale<span class="token punctuation">.</span>step
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scale<span class="token punctuation">.</span>value <span class="token operator">&lt;</span> scale<span class="token punctuation">.</span>max<span class="token punctuation">)</span> scale<span class="token punctuation">.</span>value <span class="token operator">+=</span> scale<span class="token punctuation">.</span>step
  <span class="token punctuation">}</span>

  <span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span>HTMLElement<span class="token punctuation">}</span></span> */</span>
  <span class="token keyword">const</span> stage <span class="token operator">=</span> refComponent<span class="token punctuation">.</span>value<span class="token punctuation">.</span>$el
  <span class="token keyword">const</span> rect <span class="token operator">=</span> stage<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token doc-comment comment">/** é¼ æ ‡è·ç¦»å…ƒç´  \`left\` çš„æ¯”ä¾‹ */</span>
  <span class="token keyword">const</span> leftScale <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> rect<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">/</span> rect<span class="token punctuation">.</span>width
  <span class="token doc-comment comment">/** é¼ æ ‡è·ç¦»å…ƒç´  \`top\` çš„æ¯”ä¾‹ */</span>
  <span class="token keyword">const</span> topScale <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> rect<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token operator">/</span> rect<span class="token punctuation">.</span>height
  <span class="token doc-comment comment">/** ç¼©æ”¾åçš„å…ƒç´ å®½åº¦ */</span>
  <span class="token keyword">const</span> newStageWidth <span class="token operator">=</span> store<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width <span class="token operator">*</span> <span class="token punctuation">(</span>scale<span class="token punctuation">.</span>value <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token doc-comment comment">/** ç¼©æ”¾åçš„å…ƒç´ é«˜åº¦ */</span>
  <span class="token keyword">const</span> newStageHeight <span class="token operator">=</span> store<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height <span class="token operator">*</span> <span class="token punctuation">(</span>scale<span class="token punctuation">.</span>value <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token doc-comment comment">/** ç¼©æ”¾åçš„é¼ æ ‡è·ç¦»å…ƒç´  left å€¼ */</span>
  <span class="token keyword">const</span> newRectLeft <span class="token operator">=</span> newStageWidth <span class="token operator">*</span> leftScale
  <span class="token doc-comment comment">/** ç¼©æ”¾åçš„é¼ æ ‡è·ç¦»å…ƒç´  top å€¼ */</span>
  <span class="token keyword">const</span> newRectTop <span class="token operator">=</span> newStageHeight <span class="token operator">*</span> topScale

  <span class="token comment">// å½“å‰ä½ç½® = å½“å‰ä½ç½® - (ç¼©æ”¾åçš„ \`left/top\` - ï¼ˆé¼ æ ‡è·ç¦»å…ƒç´  \`left/top\` å€¼))</span>
  vm<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> vm<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token punctuation">(</span>newRectLeft <span class="token operator">-</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> rect<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span>
  vm<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> vm<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">-</span> <span class="token punctuation">(</span>newRectTop <span class="token operator">-</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> rect<span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;mousewheel&#39;</span><span class="token punctuation">,</span> mousewheel<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;mousewheel&#39;</span><span class="token punctuation">,</span> mousewheel<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ‹–æ‹‰" tabindex="-1"><a class="header-anchor" href="#æ‹–æ‹‰" aria-hidden="true">#</a> æ‹–æ‹‰</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * åˆå§‹åŒ– ç”»å¸ƒä½ç½®
     */</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span>HTMLElement<span class="token punctuation">}</span></span> */</span>
      <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>canvas

      <span class="token keyword">const</span> x <span class="token operator">=</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>offsetWidth <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
      <span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>offsetHeight <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>store<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">=</span> x
      <span class="token keyword">this</span><span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">=</span> y
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>KeyboardEvent<span class="token punctuation">}</span></span> <span class="token parameter">e</span>
     */</span>
    <span class="token function">spaceDownHandle</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span>HTMLElement<span class="token punctuation">}</span></span> */</span>
      <span class="token keyword">const</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target
      <span class="token keyword">this</span><span class="token punctuation">.</span>spaceDown <span class="token operator">=</span> <span class="token boolean">true</span>
      target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token string">&#39;grab&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>KeyboardEvent<span class="token punctuation">}</span></span> <span class="token parameter">e</span>
     */</span>
    <span class="token function">spaceUpHandle</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token doc-comment comment">/** <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span>HTMLElement<span class="token punctuation">}</span></span> */</span>
      <span class="token keyword">const</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target
      target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cursor <span class="token operator">=</span> <span class="token string">&#39;default&#39;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>spaceDown <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token doc-comment comment">/**
     * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>boolean<span class="token punctuation">}</span></span> <span class="token parameter">manual</span> æ˜¯å¦ç‚¹å‡»ç¼©æ”¾
     */</span>
    <span class="token function">scaleManual</span><span class="token punctuation">(</span><span class="token parameter">manual</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>scale<span class="token punctuation">.</span>manual <span class="token operator">=</span> manual
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç©ºæ ¼+é¼ æ ‡å·¦é”®å¯å®ç°æ‹–åŠ¨ç”»å¸ƒï¼Œé»˜è®¤å°†ç”»å¸ƒå®šä½åˆ°ç¼–è¾‘å™¨ä¸­é—´ï¼Œæ¯”è¾ƒeasyï¼Œä½ è‚¯å®šèƒ½çœ‹æ‡‚</p><h2 id="æœ€å" tabindex="-1"><a class="header-anchor" href="#æœ€å" aria-hidden="true">#</a> æœ€å</h2><p>æ ¹æ®é¼ æ ‡ä½ç½®ç¼©æ”¾è¿™ä¸ªå®ç°åŸç†å¸Œæœ›ä½ èƒ½çœ‹æ‡‚ï¼Œè¿™æ ·å°±ä¼šè·Ÿæˆ‘ä¸€æ ·å¼º</p><figure><img src="https://static-1256180570.cos.ap-nanjing.myqcloud.com/image/1732983146.jpg?imageMogr2/interlace/1/quality/100/thumbnail/350x" alt="-1c699959fbc944f7" tabindex="0" loading="lazy"><figcaption>-1c699959fbc944f7</figcaption></figure>`,25))])}const r=s(c,[["render",l],["__file","template_editor.html.vue"]]);export{r as default};
